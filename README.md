# Telegram Points Bot (by hashtag in channel comments)

Бот считает баллы за сообщения с хэштегами (`#балл`, `#+1`, `#очки`) в **комментариях к постам канала** (то есть в привязанной группе).

## Что бот умеет
- Засчитывает 1 балл, если сообщение в группе содержит `#балл` / `#+1` / `#очки` (регистронезависимо).
- Хранит счёт **по каждому чату отдельно** (то есть для каждого канала/группы — свой рейтинг).
- Команды:
  - `/моибаллы` — твой результат в этом чате
  - `/top` — топ‑10 участников чата
  - `/help` — подсказка

## Быстрый старт (локально, macOS/Windows/Linux)
1) Установи Python 3.10+  
2) Скачай этот проект и открой терминал в папке проекта  
3) Установи зависимости:
```
python3 -m pip install -r requirements.txt
```
4) Запусти бота, передав токен в переменной окружения:
```
export TELEGRAM_BOT_TOKEN=123456:ABC...   # macOS/Linux
set TELEGRAM_BOT_TOKEN=123456:ABC...      # Windows PowerShell
python3 main.py
```

## Настройка Telegram
1) В @BotFather создай бота (`/newbot`) и скопируй токен.  
2) В @BotFather отключи **Privacy Mode**: `/setprivacy` → выбери бота → **Disable**.  
   Это нужно, чтобы бот видел обычные сообщения в группе.  
3) В настройках твоего **канала** привяжи **группу для обсуждений** (она же и есть комментарии).  
4) Добавь бота в эту группу (достаточно прав «читать сообщения»).  
5) Напиши в комментариях к посту канала (то есть в группе) `#балл` — бот ответит и засчитает 1 балл.

## Развёртывание на Render (worker)
1) Создай репозиторий (GitHub/GitLab) и добавь файлы проекта.  
2) На https://render.com → New → **Worker** → подключи свой репозиторий.  
3) Environment: добавь переменную `TELEGRAM_BOT_TOKEN` со значением токена.  
4) Start command: `python main.py` (или оставь Procfile c `worker: python main.py`).  
5) Deploy. Worker должен работать постоянно и опрашивать Telegram (polling).

## Примечания
- База данных `scores.db` создаётся в рабочей папке автоматически (SQLite). Счёт ведётся отдельно для каждого чата.  
- Регулярное выражение для подсчёта можно настроить в `HASHTAG_PATTERN` (см. `main.py`).  
- Чтобы перенести базу — просто забери файл `scores.db`.
